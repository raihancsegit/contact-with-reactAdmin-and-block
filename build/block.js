!function(){"use strict";var e=window.wp.element,t=window.wp.blocks,n=window.wp.blockEditor,l=window.wp.components;(0,t.registerBlockType)("contact-signup/block",{title:"Contact Signup Block",icon:"id",category:"widgets",attributes:{selectedContact:{type:"string",default:""}},edit:t=>{const{attributes:c,setAttributes:a}=t,[o,s]=(0,e.useState)([]),[i,r]=(0,e.useState)(!0),[d,u]=(0,e.useState)(null);(0,e.useEffect)((()=>{const e=`${appLocalizer.apiUrl}/contact-signup/v1/contacts`;fetch(e).then((e=>e.json())).then((e=>{console.log("Fetched Contacts:",e),s(e),r(!1);const t=e.find((e=>e.id===c.selectedContact));u(t||null),console.log("Initial Contact Data:",t)})).catch((e=>{console.error("Error fetching contacts:",e),r(!1)}))}),[]),(0,e.useEffect)((()=>{if(o.length>0){const e=o.find((e=>e.id===c.selectedContact));u(e||null),console.log("Selected Contact Data Updated:",e)}}),[c.selectedContact,o]);const p=o.map((e=>({label:e.name,value:e.id})));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:"Contact Settings"},i?(0,e.createElement)("p",null,"Loading contacts..."):0===o.length?(0,e.createElement)("p",null,"No contacts found."):(0,e.createElement)(l.SelectControl,{label:"Select a Contact",value:c.selectedContact,options:[{label:"Select a contact",value:""},...p],onChange:e=>{a({selectedContact:e});const t=o.find((t=>t.id===e));u(t||null),console.log("Select Change - Contact ID:",e),console.log("Select Change - Contact Data:",t)}}))),(0,e.createElement)("div",{className:"contact-card-wrapper"},d?(0,e.createElement)("div",{className:"contact-card"},(0,e.createElement)("h2",null,d.name),(0,e.createElement)("p",null,"Address: ",d.address),(0,e.createElement)("p",null,"Phone: ",d.phone),(0,e.createElement)("p",null,"Email: ",d.email),(0,e.createElement)("p",null,"Hobbies: ",d.hobbies)):(0,e.createElement)("p",null,"Select a contact to see details.")))},save:()=>null})}();